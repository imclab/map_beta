function addCommas(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";var t=/(\d+)(\d{3})/;while(t.test(x1))x1=x1.replace(t,"$1,$2");return x1+x2}function roundNumber(e,t){var n=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return n}function fixUp(e){return e>999999999?(e=roundNumber(e/1e9,1),addCommas(e)+"B"):e>999999?(e=roundNumber(e/1e6,1),addCommas(e)+"M"):addCommas(e)}function CustomTooltip(e,t){function n(t,n){$("#"+e).html(t),$("#"+e).show(),i(n)}function r(){$("#"+e).hide()}function i(t){var n="#"+e,r=20,i=10,s=$(n).width(),o=$(n).height(),u=$(window).scrollTop(),a=$(window).scrollLeft(),f=document.all?t.clientX+a:t.pageX,l=document.all?t.clientY+u:t.pageY,c=f-a+r*2+s>$(window).width()?f-s-r*2:f+r;c<a+r&&(c=a+r);var h=l-u+i*2+o>$(window).height()?l-o-i*2:l+i;h<u+i&&(h=l+i),$(n).css("top",h+"px").css("left",c+"px")}var e=e;return $("body").append("<div class='custom_tooltip' id='"+e+"'></div>"),t&&$("#"+e).css("width",t),r(),{showTooltip:n,hideTooltip:r,updatePosition:i}}window.log=function(){log.history=log.history||[],log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);typeof console.log=="object"?log.apply.call(console.log,console,e):console.log.apply(console,e)}},function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;r=n.pop();)e[r]=e[r]||t}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),i&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var f=i.length;f<o;f+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=e(this).data("index.ui-slider-handle"),s,o,u,f;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r.preventDefault();if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),s=t._start(r,i);if(s===!1)return}}f=t.options.step,t.options.values&&t.options.values.length?o=u=t.values(i):o=u=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:u=t._valueMin();break;case e.ui.keyCode.END:u=t._valueMax();break;case e.ui.keyCode.PAGE_UP:u=t._trimAlignValue(o+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:u=t._trimAlignValue(o-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===t._valueMax())return;u=t._trimAlignValue(o+f);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===t._valueMin())return;u=t._trimAlignValue(o-f)}t._slide(r,i,u)}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,f,l,c,h;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),f=t)}),n.range===!0&&this.values(1)===n.min&&(f+=1,o=e(this.handles[f])),l=this._start(t,f),l===!1?!1:(this._mouseSliding=!0,u._handleIndex=f,o.addClass("ui-state-active").focus(),c=o.offset(),h=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:t.pageX-c.left-o.width()/2,top:t.pageY-c.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,f,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,f,l,c;this.options.values&&this.options.values.length?this.handles.each(function(t,f){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(f=this.value(),l=this._valueMin(),c=this._valueMax(),s=c!==l?(f-l)/(c-l)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.21"})}(jQuery),jQuery.fn.selectToUISlider=function(e){function o(e){return e.constructor==Array}function u(e){return n.tooltipSrc=="text"?i[e].text:i[e].value}function a(e){return parseFloat(i[e].value)}function p(e){return(e/(i.length-1)*100).toFixed(2)+"%"}var t=jQuery(this),n=jQuery.extend({labels:3,tooltip:!0,tooltipSrc:"text",labelSrc:"value",sliderOptions:null,callback:!1,every:4},e),r=function(){var e=[];return t.each(function(){e.push("handle_"+jQuery(this).attr("id"))}),e}(),i=function(){var e=[];return t.eq(0).find("option").each(function(){e.push({value:jQuery(this).attr("value"),text:jQuery(this).text()})}),e}(),s=function(){if(t.eq(0).find("optgroup").size()>0){var e=[];return t.eq(0).find("optgroup").each(function(t){e[t]={},e[t].label=jQuery(this).attr("label"),e[t].options=[],jQuery(this).find("option").each(function(){e[t].options.push({text:jQuery(this).text(),value:jQuery(this).attr("value")})})}),e}return null}(),f={step:1,min:0,orientation:"horizontal",max:i.length-1,range:t.length>1,slide:function(e,t){var r=jQuery(t.handle),i=u(t.value);r.attr("aria-valuetext",i).attr("aria-valuenow",t.value).find(".ui-slider-tooltip .ttContent").text(i);var s=jQuery("#"+r.attr("id").split("handle_")[1]);s.find("option").eq(t.value).attr("selected","selected");if(n.callback){var o;t.values.length>1?o=[a(t.values[0]),a(t.values[1])]:o=[a(t.value)];var f=$(this).parent().attr("id");$(window).trigger(n.callback,[f,o])}return!0},values:function(){var e=[];return t.each(function(){e.push(jQuery(this).get(0).selectedIndex)}),e}()};n.sliderOptions=e?jQuery.extend(f,e.sliderOptions):f,t.bind("change keyup click",function(){var e=jQuery(this).get(0).selectedIndex,t=jQuery("#handle_"+jQuery(this).attr("id")),n=t.data("handleNum");t.parents(".ui-slider:eq(0)").slider("values",n,e)});var l=jQuery("<div></div>");t.each(function(e){var t="",i=jQuery("label[for="+jQuery(this).attr("id")+"]"),s=i.size()>0?"Slider control for "+i.text()+"":"",o=i.attr("id")||i.attr("id","label_"+r[e]).attr("id");n.tooltip==0&&(t=' style="display: none;"'),jQuery('<a href="#" tabindex="0" id="'+r[e]+'" '+'class="ui-slider-handle" '+'role="slider" '+'aria-labelledby="'+o+'" '+'aria-valuemin="'+n.sliderOptions.min+'" '+'aria-valuemax="'+n.sliderOptions.max+'" '+'aria-valuenow="'+n.sliderOptions.values[e]+'" '+'aria-valuetext="'+u(n.sliderOptions.values[e])+'" '+'><span class="screenReaderContext">'+s+"</span>"+'<span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+t+'><span class="ttContent"></span>'+'<span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span>'+"</span></a>").data("handleNum",e).appendTo(l)});if(s){var c=0,h=l.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find(".ui-slider-scale:eq(0)");jQuery(s).each(function(e){h.append('<dt style="width: '+(100/s.length).toFixed(2)+"%"+"; left:"+(e/(s.length-1)*100).toFixed(2)+"%"+'"><span>'+this.label+"</span></dt>");var t=this.options;jQuery(this.options).each(function(e){var r=c==i.length-1||c==0?'style="display: none;"':"",s=n.labelSrc=="text"?t[e].text:t[e].value;h.append('<dd style="left:'+p(c)+'"><span class="ui-slider-label">'+s+'</span><span class="ui-slider-tic ui-widget-content"'+r+"></span></dd>"),c++})})}else{var h=l.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find(".ui-slider-scale:eq(0)");jQuery(i).each(function(e){var t=e==i.length-1||e==0||e%n.every!=0?'style="display: none;"':"",r=n.labelSrc=="text"?this.text:this.value;h.append('<li style="left:'+p(e)+'"><span class="ui-slider-label">'+r+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></li>")})}n.labels>1&&l.find(".ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label").addClass("ui-slider-label-show");var d=Math.max(1,Math.round(i.length/n.labels));for(var v=0;v<i.length;v+=d)i.length-v>d&&l.find(".ui-slider-scale li:eq("+v+") span.ui-slider-label, .ui-slider-scale dd:eq("+v+") span.ui-slider-label").addClass("ui-slider-label-show");l.find(".ui-slider-scale dt").each(function(e){jQuery(this).css({left:(100/s.length*e).toFixed(2)+"%"})}),l.insertAfter(jQuery(this).eq(this.length-1)).slider(n.sliderOptions).attr("role","application").find(".ui-slider-label").each(function(){jQuery(this).css("marginLeft",-jQuery(this).width()/2)}),l.find(".ui-tooltip-pointer-down-inner").each(function(){var e=jQuery(".ui-tooltip-pointer-down-inner").css("borderTopWidth"),t=jQuery(this).parents(".ui-slider-tooltip").css("backgroundColor");jQuery(this).css("border-top",e+" solid "+t)});var m=l.slider("values");return o(m)?jQuery(m).each(function(e){l.find(".ui-slider-tooltip .ttContent").eq(e).text(u(this))}):l.find(".ui-slider-tooltip .ttContent").eq(0).text(u(m)),this},!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},isHTML:function(e){return typeof e!="string"||e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(e)},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.isHTML(t)?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var t=this,n=this.tip();n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),function(e){function t(e){return e}function n(e,t){for(var n=0,r=t.length,i=new Array(r);n<r;++n)i[n]=e[t[n]];return i}function r(e){function t(t,n,r,i){while(r<i){var s=r+i>>1;e(t[s])<n?r=s+1:i=s}return r}function n(t,n,r,i){while(r<i){var s=r+i>>1;n<e(t[s])?i=s:r=s+1}return r}return n.right=n,n.left=t,n}function i(e){function t(e,t,n){var i=n-t,s=(i>>>1)+1;while(--s>0)r(e,s,i,t);return e}function n(e,t,n){var i=n-t,s;while(--i>0)s=e[t],e[t]=e[t+i],e[t+i]=s,r(e,1,i,t);return e}function r(t,n,r,i){var s=t[--i+n],o=e(s),u;while((u=n<<1)<=r){u<r&&e(t[i+u])>e(t[i+u+1])&&u++;if(o<=e(t[i+u]))break;t[i+n]=t[i+u],n=u}t[i+n]=s}return t.sort=n,t}function s(e){function t(t,r,i,s){var o=new Array(s=Math.min(i-r,s)),u,a,f,l;for(a=0;a<s;++a)o[a]=t[r++];n(o,0,s);if(r<i){u=e(o[0]);do if(f=e(l=t[r])>u)o[0]=l,u=e(n(o,0,s)[0]);while(++r<i)}return o}var n=i(e);return t}function o(e){function t(t,n,r){for(var i=n+1;i<r;++i){for(var s=i,o=t[i],u=e(o);s>n&&e(t[s-1])>u;--s)t[s]=t[s-1];t[s]=o}return t}return t}function u(e){function t(e,t,i){return(i-t<k?r:n)(e,t,i)}function n(n,r,i){var s=(i-r)/6|0,o=r+s,u=i-1-s,a=r+i-1>>1,f=a-s,l=a+s,c=n[o],h=e(c),p=n[f],d=e(p),v=n[a],m=e(v),g=n[l],y=e(g),b=n[u],w=e(b),E;h>d&&(E=c,c=p,p=E,E=h,h=d,d=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E),h>m&&(E=c,c=v,v=E,E=h,h=m,m=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),h>y&&(E=c,c=g,g=E,E=h,h=y,y=E),m>y&&(E=v,v=g,g=E,E=m,m=y,y=E),d>w&&(E=p,p=b,b=E,E=d,d=w,w=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E);var S=p,x=d,T=g,N=y;n[o]=c,n[f]=n[r],n[a]=v,n[l]=n[i-1],n[u]=b;var C=r+1,k=i-2,L=x<=N&&x>=N;if(L)for(var A=C;A<=k;++A){var O=n[A],M=e(O);if(M<x)A!==C&&(n[A]=n[C],n[C]=O),++C;else if(M>x)for(;;){var _=e(n[k]);if(_>x){k--;continue}if(_<x){n[A]=n[C],n[C++]=n[k],n[k--]=O;break}n[A]=n[k],n[k--]=O;break}}else for(var A=C;A<=k;A++){var O=n[A],M=e(O);if(M<x)A!==C&&(n[A]=n[C],n[C]=O),++C;else if(M>N)for(;;){var _=e(n[k]);if(_>N){k--;if(k<A)break;continue}_<x?(n[A]=n[C],n[C++]=n[k],n[k--]=O):(n[A]=n[k],n[k--]=O);break}}n[r]=n[C-1],n[C-1]=S,n[i-1]=n[k+1],n[k+1]=T,t(n,r,C-1),t(n,k+2,i);if(L)return n;if(C<o&&k>u){var D,_;while((D=e(n[C]))<=x&&D>=x)++C;while((_=e(n[k]))<=N&&_>=N)--k;for(var A=C;A<=k;A++){var O=n[A],M=e(O);if(M<=x&&M>=x)A!==C&&(n[A]=n[C],n[C]=O),C++;else if(M<=N&&M>=N)for(;;){var _=e(n[k]);if(_<=N&&_>=N){k--;if(k<A)break;continue}_<x?(n[A]=n[C],n[C++]=n[k],n[k--]=O):(n[A]=n[k],n[k--]=O);break}}}return t(n,C,k+1)}var r=o(e);return t}function a(e){return new Array(e)}function f(e,t){return function(n){var r=n.length;return[e.left(n,t,0,r),e.right(n,t,0,r)]}}function l(e,t){var n=t[0],r=t[1];return function(t){var i=t.length;return[e.left(t,n,0,i),e.left(t,r,0,i)]}}function c(e){return[0,e.length]}function h(){return null}function p(){return 0}function d(e){return e+1}function v(e){return e-1}function m(e){return function(t,n){return t+ +e(n)}}function g(e){return function(t,n){return t-e(n)}}function y(){function e(e){var t=T,n=e.length;return n&&(x=x
.concat(e),k=M(k,T+=n),O.forEach(function(r){r(e,t,n)})),y}function r(e){function r(t,r,i){$=t.map(e),J=K(w(i),0,i),$=n($,J);var s=Q($),o=s[0],u=s[1],a;for(a=0;a<o;++a)k[J[a]+r]|=U;for(a=u;a<i;++a)k[J[a]+r]|=U;if(!r){X=$,V=J,Z=o,et=u;return}var f=X,l=V,c=0,h=0;X=new Array(T),V=b(T,T);for(a=0;c<r&&h<i;++a)f[c]<$[h]?(X[a]=f[c],V[a]=l[c++]):(X[a]=$[h],V[a]=J[h++]+r);for(;c<r;++c,++a)X[a]=f[c],V[a]=l[c];for(;h<i;++h,++a)X[a]=$[h],V[a]=J[h]+r;s=Q(X),Z=s[0],et=s[1]}function o(e,t,n){Y.forEach(function(e){e($,J,t,n)}),$=J=null}function a(e){var t,n,r,i=e[0],s=e[1],o=[],u=[];if(i<Z)for(t=i,n=Math.min(Z,s);t<n;++t)k[r=V[t]]^=U,o.push(r);else if(i>Z)for(t=Z,n=Math.min(i,et);t<n;++t)k[r=V[t]]^=U,u.push(r);if(s>et)for(t=Math.max(i,et),n=s;t<n;++t)k[r=V[t]]^=U,o.push(r);else if(s<et)for(t=Math.max(Z,s),n=et;t<n;++t)k[r=V[t]]^=U,u.push(r);return Z=i,et=s,A.forEach(function(e){e(U,o,u)}),R}function y(e){return e==null?P():Array.isArray(e)?D(e):L(e)}function L(e){return a((Q=f(S,e))(X))}function D(e){return a((Q=l(S,e))(X))}function P(){return a((Q=c)(X))}function H(e){var t=[],n=et,r;while(--n>=Z&&e>0)k[r=V[n]]||(t.push(x[r]),--e);return t}function I(e){function n(t,n,i,s){function f(){++j===H&&(c=_(c,P<<=1),D=_(D,P),H=E(P))}var l=O,c=b(j,H),p=q,d=$,v=j,m=0,g=0,y,w,S,N,C,L;Q&&(p=d=h),O=new Array(j),j=0,D=v>1?M(D,T):b(T,H),v&&(S=(w=l[0]).key);while(g<s&&!((N=e(t[g]))>=N))++g;while(g<s){if(w&&S<=N){C=w,L=S,c[m]=j;if(w=l[++m])S=w.key}else C={key:N,value:d()},L=N;O[j]=C;while(!(N>L)){D[y=n[g]+i]=j,k[y]&W||(C.value=p(C.value,x[y]));if(++g>=s)break;N=e(t[g])}f()}while(m<v)O[c[m]=j]=l[m++],f();if(j>m)for(m=0;m<i;++m)D[m]=c[D[m]];y=A.indexOf(J),j>1?(J=r,K=u):(j===1?(J=o,K=a):(J=h,K=h),D=null),A[y]=J}function r(e,t,n){if(e===U||Q)return;var r,i,s,o;for(r=0,s=t.length;r<s;++r)k[i=t[r]]&W||(o=O[D[i]],o.value=q(o.value,x[i]));for(r=0,s=n.length;r<s;++r)(k[i=n[r]]&W)===e&&(o=O[D[i]],o.value=R(o.value,x[i]))}function o(e,t,n){if(e===U||Q)return;var r,i,s,o=O[0];for(r=0,s=t.length;r<s;++r)k[i=t[r]]&W||(o.value=q(o.value,x[i]));for(r=0,s=n.length;r<s;++r)(k[i=n[r]]&W)===e&&(o.value=R(o.value,x[i]))}function u(){var e,t;for(e=0;e<j;++e)O[e].value=$();for(e=0;e<T;++e)k[e]&W||(t=O[D[e]],t.value=q(t.value,x[e]))}function a(){var e,t=O[0];t.value=$();for(e=0;e<T;++e)k[e]&W||(t.value=q(t.value,x[e]))}function f(){return Q&&(K(),Q=!1),O}function l(e){var t=F(f(),0,O.length,e);return I.sort(t,0,t.length)}function c(e,t,n){return q=e,R=t,$=n,Q=!0,L}function y(){return c(d,v,p)}function w(e){return c(m(e),g(e),p)}function S(e){function t(t){return e(t.value)}return F=s(t),I=i(t),L}function N(){return S(t)}function C(){return j}var L={top:l,all:f,reduce:c,reduceCount:y,reduceSum:w,order:S,orderNatural:N,size:C},O,D,P=8,H=E(P),j=0,F,I,q,R,$,J=h,K=h,Q=!0;return arguments.length<1&&(e=t),A.push(J),Y.push(n),n(X,V,0,T),y().orderNatural()}function q(){var e=I(h),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e}var R={filter:y,filterExact:L,filterRange:D,filterAll:P,top:H,group:I,groupAll:q},U=1<<N++,W=~U,X,V,$,J,K=u(function(e){return $[e]}),Q=c,Y=[],Z=0,et=0;return O.unshift(r),O.push(o),N>C&&(k=_(k,C<<=1)),r(x,0,T),o(x,0,T),R}function o(){function e(e,t,n){var r;if(h)return;for(r=t;r<T;++r)k[r]||(a=f(a,x[r]))}function t(e,t,n){var r,i,s;if(h)return;for(r=0,s=t.length;r<s;++r)k[i=t[r]]||(a=f(a,x[i]));for(r=0,s=n.length;r<s;++r)k[i=n[r]]===e&&(a=l(a,x[i]))}function n(){var e;a=c();for(e=0;e<T;++e)k[e]||(a=f(a,x[e]))}function r(e,t,n){return f=e,l=t,c=n,h=!0,u}function i(){return r(d,v,p)}function s(e){return r(m(e),g(e),p)}function o(){return h&&(n(),h=!1),a}var u={reduce:r,reduceCount:i,reduceSum:s,value:o},a,f,l,c,h=!0;return A.push(t),O.push(e),e(x,0,T),i()}function a(){return T}var y={add:e,dimension:r,groupAll:o,size:a},x=[],T=0,N=0,C=8,k=L(0),A=[],O=[];return arguments.length?e(arguments[0]):y}function b(e,t){return(t<257?L:t<65537?A:O)(e)}function w(e){var t=b(e,e);for(var n=-1;++n<e;)t[n]=n;return t}function E(e){return e===8?256:e===16?65536:4294967296}y.version="1.0.3",y.permute=n;var S=y.bisect=r(t);S.by=r;var x=y.heap=i(t);x.by=i;var T=y.heapselect=s(t);T.by=s;var N=y.insertionsort=o(t);N.by=o;var C=y.quicksort=u(t);C.by=u;var k=32,L=a,A=a,O=a,M=t,_=t;typeof Uint8Array!="undefined"&&(L=function(e){return new Uint8Array(e)},A=function(e){return new Uint16Array(e)},O=function(e){return new Uint32Array(e)},M=function(e,t){var n=new e.constructor(t);return n.set(e),n},_=function(e,t){var n;switch(t){case 16:n=A(e.length);break;case 32:n=O(e.length);break;default:throw new Error("invalid array width!")}return n.set(e),n}),e.crossfilter=y}(this),function(){var e,t,n;n=typeof exports!="undefined"&&exports!==null?exports:this,e=function(){var e,t,r,i,s,o,u,a,f,l,c,h,p,d;return s=null,e=null,o={},f=.2,r=.08,u={building_rsf:{min:3e3,max:45e5,values:[3e3,45e5],ticks:[3e3,4820,6e3,7030,8e3,9090,10150,11430,12740,14320,16200,18300,20350,22670,25e3,28140,30380,33710,37180,41720,46260,50400,55e3,59850,64490,72270,8e4,89530,99920,108700,121250,135420,151930,175110,202880,235e3,278810,333360,421160,572470,45e5],prefix:"",suffix:""},government_leased:{min:0,max:100,values:[0,100],ticks:[0,2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30,32.5,35,37.5,40,42.5,45,47.5,50,52.5,55,57.5,60,62.5,65,67.5,70,72.5,75,77.5,80,82.5,85,87.5,90,92.5,95,97.5,100],prefix:"",suffix:"%"},government_rsf:{min:3e3,max:24e5,values:[3e3,24e5],ticks:[3e3,3380,3750,4080,4440,4850,5170,5590,6e3,6350,6810,7220,7630,8050,8560,9090,9600,10100,10770,11500,12160,12990,14e3,14970,16240,17700,19250,21100,23200,25740,29560,33320,38130,45560,53110,64040,78200,99200,134260,217420,24e5],prefix:"",suffix:""},remaining_total_term:{min:0,max:20,values:[0,20],ticks:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5,19,19.5,20],prefix:"",suffix:""},remaining_firm_term:{min:0,max:20,values:[0,20],ticks:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5,19,19.5,20],prefix:"",suffix:""},total_rent:{min:0,max:715e5,values:[0,715e5],ticks:[0,53690,67740,78390,88300,97050,105530,113830,123480,132240,144560,154590,168750,180050,192630,206180,221160,238130,254620,272200,297490,318e3,342890,371210,403260,437950,479430,525080,581990,649160,729410,829540,975030,1161940,1409830,1710560,2127740,2611850,3392270,6305710,715e5],prefix:"$",suffix:""},rent_prsf:{min:0,max:90,values:[0,90],ticks:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,65,66,68,72,74,78,82,86,90],prefix:"",suffix:""}},i=function(e){var t;return t=["bldg_rsf","percent_govt_leased","total_leased_rsf","remaining_total_term","remaining_firm_term","total_annual_rent","rent_prsf"],e.forEach(function(e){return t.forEach(function(t){return e[t]=parseFloat(e[t])})}),e},d=function(e){var t;return t=["bldg_rsf","percent_govt_leased","total_leased_rsf","remaining_total_term","remaining_firm_term","total_annual_rent","rent_prsf"],t.forEach(function(t){var n,r,i,s,o,u,a;n=d3.extent(e,function(e){return e[t]}),r=e.map(function(e){return e[t]}),r.sort(d3.ascending),i=[];for(u=a=0;a<=40;u=a+=1)s=u/40,i.push(s);return o=[],i.forEach(function(e){var t;return t=Math.round(d3.quantile(r,e)/10)*10,o.push(t)})}),e},l=function(t){return t=i(t),s=crossfilter(t),e=s.groupAll(),c(),h()},h=function(){return d3.entries(u).forEach(function(e){var t,n,r;return r="#slider_"+e.key,t="select_"+e.key,n=d3.select(r).append("select").attr("class",t).style("display","none"),n.selectAll("option").data(e.value.ticks).enter().append("option").attr("value",function(e){return e}).attr("selected",function(t){return e.value.values[0]===t?"selected":null}).text(function(t){return e.value.prefix+fixUp(t)+e.value.suffix}),n=d3.select(r).append("select").attr("class",t).style("display","none"),n.selectAll("option").data(e.value.ticks).enter().append("option").attr("value",function(e){return e}).attr("selected",function(t){return e.value.values[1]===t?"selected":null}).text(function(e){return e}),$("."+t).selectToUISlider({labels:0,callback:"custom_slide"})}),$(n).bind("custom_slide",a)},p=function(){return d3.entries(u).forEach(function(e){var t;return t="#slider_"+e.key,$(t).slider({range:!0,min:e.value.min,max:e.value.max,values:e.value.values,slide:a})})},a=function(e,t,r){var i,s;return t=t.replace("slider_",""),s=parseFloat(r[0])-1,i=parseFloat(r[1])+1,o[t].filter([s,i]),$(n).trigger("filterupdate")},c=function(){return o.building_rsf=s.dimension(function(e){return e.bldg_rsf}),o.government_leased=s.dimension(function(e){return parseFloat(e.percent_govt_leased)}),o.government_rsf=s.dimension(function(e){return e.total_leased_rsf}),o.remaining_total_term=s.dimension(function(e){return e.remaining_total_term}),o.remaining_firm_term=s.dimension(function(e){return e.remaining_firm_term}),o.total_rent=s.dimension(function(e){return e.total_annual_rent}),o.rent_prsf=s.dimension(function(e){return e.rent_prsf}),d3.entries(u).forEach(function(e){var t,n;return n=e.value.values[0]-1,t=e.value.values[1]+1,o[e.key].filter([n,t])})},l.data=function(){return o.building_rsf?o.building_rsf.top(Infinity):[]},l.capRate=function(e){return arguments.length?(r=e,l):r},l.opExpense=function(e){return arguments.length?(f=e,l):f},l.total_rsf=function(){return e?e.reduceSum(function(e){return e.total_leased_rsf}).value():0},t=function(e){var t;return t=e-e*f,t/r},l.total_cap_value=function(){return e?e.reduceSum(function(e){return t(e.total_annual_rent)}).value():0},l},t=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y=this;return g=620,o=430,r=null,i=null,s=null,n=null,e=[],p=null,a=null,l=null,l=d3.geo.albersUsa(),f=d3.geo.path(),d=null,t=4,m=function(e){return d=CustomTooltip("map_tooltip",240),e.each(function(e){var t,i,s;return r=e,l.scale(g*1.2).translate([10,0]),f.projection(l),s=d3.select(this).selectAll("svg").data([r]),i=s.enter().append("svg").append("g"),s.attr("width",g),s.attr("height",o),s.append("rect").attr("class","background").attr("width",g).attr("height",o),t=s.insert("g").attr("transform","translate("+g/2+","+o/2+")"),p=t.append("g").attr("id","states"),a=t.append("g").attr("id","state-labels"),n=t.append("g").attr("id","circles"),d3.json("data/us-states.json",c),v()})},m.update=function(e){return r=e,v()},v=function(){var i;return i=[],r.forEach(function(e){var t;return t=[e.longitude,e.latitude],i.push(l(t))}),e=n.selectAll("circle").data(r,function(e){return""+e.longitude+","+e.latitude}),e.enter().append("circle").attr("class","location").attr("cx",function(e,t){return i[t][0]}).attr("cy",function(e,t){return i[t][1]}).attr("r",t).on("mouseover",function(e,t){return h(e,t,this)}).on("mouseout",function(e,t){return u(e,t,this)}),e.exit().remove()},h=function(e,t,n){var r;return d3.select(n).classed("active",!0),r='<p class="main">'+e.city+", "+e.state+'</p><hr class="tooltip-hr">',r+='<span class="name">Lease RSF:</span><span class="value"> '+fixUp(e.total_leased_rsf)+"</span><br/>",r+='<span class="name">% Govt Leased:</span><span class="value"> '+fixUp(e.percent_govt_leased)+"%</span><br/>",r+='<span class="name">Rent/RSF:</span><span class="value"> $'+fixUp(e.rent_prsf)+"</span><br/>",r+='<span class="name">Remaining Term (Yrs):</span><span class="value"> '+fixUp(e.remaining_total_term)+"</span><br/>",d.showTooltip(r,d3.event)},u=function(e,t,n){return d3.select(n).classed("active",!1),d.hideTooltip()},c=function(e){return p.selectAll("path").data(e.features).enter().append("path").attr("d",f)},m},n.plotData=function(e,t,n){return d3.select(e).datum(t).call(n)},$(function(){var r,i,s,o,u;return s=t(),i=e(),n.update=function(){var e;return e=i.data(),$("#metric_locations").text(addCommas(e.length)),$("#metric_rsf").text(fixUp(i.total_rsf())),n.updateCap(),s.update(e)},n.updateCap=function(){return $("#metric_cap_value").text("$"+fixUp(i.total_cap_value()))},$(n).bind("filterupdate",update),plotData("#map",[],s),u=function(e,t,r){return i.opExpense(r[0]),n.updateCap()},o=function(e,t,r){return i.capRate(r[0]),n.updateCap()},$("#select_op_expense").selectToUISlider({labels:0,callback:"set_op_expense",every:1}),$(n).bind("set_op_expense",u),$("#select_cap_rate").selectToUISlider({labels:0,callback:"set_cap_rate",every:1}),$(n).bind("set_cap_rate",o),$(".icon-question-sign").tooltip(),r=function(e){return i(e),update()},d3.csv("data/property_data.csv",r)})}.call(this);